$(function(){"use strict";var e=$("#welcome");$(document).on("click.welcome tap.welcome",function(n){n.preventDefault(),e.fadeOut(500),$(document).off("keyup.welcome click.welcome tap.welcome")}),$(document).on("keyup.welcome",function(n){27===n.keyCode&&(e.fadeOut(500),$(document).off("keyup.welcome click.welcome tap.welcome"))});var n=!1;$(window).on("scroll.lazy",function(){n=!0});var o,s,a=setInterval(function(){n&&(n=!1,$("html").addClass("lazy"),$(window).off("scroll.lazy"),clearInterval(a))},100),t=$("#content-toggle"),c=function(e,n){function c(e){window.clearTimeout(o),t.removeClass("toggled"),o=window.setTimeout(function(){e.revealing("show")},150)}var a=$(e,".scene-active .scene-content");if(a.revealing("reset"),a.addClass("reveal-this"),c(a),n!==!1){var i=$(n,".scene-active .scene-content");window.clearTimeout(s),s=window.setTimeout(function(){a.removeClass("reveal-this"),i.addClass("reveal-this"),i.revealing("reset"),c(i),t.addClass("visible").toggleClass("toggled")},4500)}},i=function(e){window.clearTimeout(o),window.clearTimeout(s),$("h2, h3",e+" .scene-content").removeClass("reveal-this"),t.removeClass("visible toggled")};$("#content-toggle").on("click tap",function(){$(this).toggleClass("toggled"),$("h2, h3",".scene-active .scene-content").toggleClass("reveal-this")});var l=function(){var e=new ScrollMagic.Controller,n={top:"-100%",ease:Power1.easeInOut},a={top:"0%",ease:Power1.easeInOut},t={opacity:1,ease:Power1.easeInOut},o={opacity:0,top:"30%",ease:Power1.easeInOut},s={opacity:0,ease:Power1.easeInOut},l={strokeDashoffset:0,ease:Power1.easeOut},r=".2",d=".5",v="1",w="50%",f="100%",u=200,g=100,m=1,M=(new ScrollMagic.Scene({triggerElement:"#scene-1",duration:f}).setClassToggle("#scene-1","scene-active").on("enter",function(){m=1,c("h1, h2",!1),$(".navdot").removeClass("scene-dotactive")}).addTo(e),new TimelineLite),x=TweenMax.to("#navdot1, #navdot4",d,{left:"-210px",opacity:1,ease:Sine.easeOut}),h=TweenMax.to("#navdot3, #navdot2",d,{left:"210px",opacity:1,ease:Sine.easeOut}),p=TweenMax.to(".navmainarc",v,{strokeDashoffset:0,ease:Sine.easeOut}),S=TweenMax.to("#navdot1",d,{bezier:{curviness:1.8,values:[{left:"-210px",top:"0px"},{left:"-148px",top:"-148px"},{left:"0px",top:"-210px"}]},ease:Sine.easeOut}),k=TweenMax.to("#navdot3",d,{bezier:{curviness:1.8,values:[{left:"210px",top:"0px"},{left:"148px",top:"148px"},{left:"0px",top:"210px"}]},ease:Sine.easeOut}),C=TweenMax.to("#nav-scroll",d,{css:{className:"+=nav-scroll-active"}});M.add([C,x,h]).add([p,S,k]);var O=(new ScrollMagic.Scene({triggerElement:"#scene-2",offset:-200,duration:w}).setTween(M).addTo(e),new ScrollMagic.Scene({triggerElement:"#scene-2",duration:f}).setClassToggle("#scene-2","scene-active").on("enter",function(e){m=2,c("h2","h3"),"REVERSE"===e.scrollDirection&&$("#navdot2").addClass("scene-dotactive"),$("#navdot3, #navdot4").removeClass("scene-dotactive")}).on("leave",function(){i("#scene-2")}).addTo(e),new TimelineLite),b=TweenMax.to("#scene-1 .scene-background",v,n),L=TweenMax.to("#scene-2 .scene-background",v,a),D=TweenMax.to("#scene-1 .scene-content",d,o),I=TweenMax.to("#scene-2 .scene-content, #scene-2 .scene-links, #links-social",v,t);O.add([b,D,I,L]);var P=(new ScrollMagic.Scene({triggerElement:"#scene-2",duration:w}).setTween(O).addTo(e),new TimelineLite),R=TweenMax.to("#navsectionarc-1, #navsectionarcstroke-1",".01",{css:{className:"+=scene-active"}}),z=TweenMax.to("#navsectionarc-1, #navsectionarcstroke-1",v,l),K=TweenMax.to("#navdot2",".01",{css:{className:"+=scene-dotactive"}});P.add(R).add(z).add(K);var Y=(new ScrollMagic.Scene({triggerElement:"#scene-2",offset:g,duration:u}).setTween(P).addTo(e),new ScrollMagic.Scene({triggerElement:"#scene-3",duration:f}).setClassToggle("#scene-3, #navdot3","scene-active").on("enter",function(e){m=3,c("h2","h3"),"REVERSE"===e.scrollDirection&&$("#navdot3").addClass("scene-dotactive"),$("#navdot4").removeClass("scene-dotactive")}).on("leave",function(){i("#scene-3")}).addTo(e),new TimelineLite),j=TweenMax.to("#scene-2 .scene-background",v,n),q=TweenMax.to("#scene-3 .scene-background",v,a),A=TweenMax.to("#scene-2 .scene-content",d,o),B=TweenMax.to("#scene-3 .scene-content, #scene-3 .scene-links",v,t),G=TweenMax.to("#scene-2 .scene-links",r,s);Y.add([j,A,B,G,q]);var J=(new ScrollMagic.Scene({triggerElement:"#scene-3",duration:w}).setTween(Y).addTo(e),new TimelineLite),Q=TweenMax.to("#navsectionarc-2, #navsectionarcstroke-2",".01",{css:{className:"+=scene-active"}}),U=TweenMax.to("#navsectionarc-2, #navsectionarcstroke-2",v,l),W=TweenMax.to("#navdot3",".01",{css:{className:"+=scene-dotactive"}});J.add(Q).add(U).add(W);var _=(new ScrollMagic.Scene({triggerElement:"#scene-3",offset:g,duration:u}).setTween(J).on("enter",function(){$("#navdot2").removeClass("scene-dotactive")}).addTo(e),new ScrollMagic.Scene({triggerElement:"#scene-4",duration:f}).setClassToggle("#scene-4, #navdot4, #site-footer","scene-active").on("enter",function(e){m=4,c("h2","h3"),$("#nav-scroll").addClass("endscene"),"REVERSE"===e.scrollDirection&&$("#navdot4").addClass("scene-dotactive")}).on("leave",function(){$("#nav-scroll").removeClass("endscene"),i("#scene-4")}).addTo(e),new TimelineLite),en=TweenMax.to("#scene-3 .scene-background",v,n),nn=TweenMax.to("#scene-4 .scene-background",v,a),an=TweenMax.to("#scene-3 .scene-content",d,o),tn=TweenMax.to("#scene-4 .scene-content, #scene-4 .scene-links",v,t),on=TweenMax.to("#scene-3 .scene-links",r,s);_.add([en,an,tn,on,nn]);var cn=(new ScrollMagic.Scene({triggerElement:"#scene-4",duration:w}).setTween(_).addTo(e),new TimelineLite),ln=TweenMax.to("#navsectionarc-3, #navsectionarcstroke-3",".01",{css:{className:"+=scene-active"}}),rn=TweenMax.to("#navsectionarc-3, #navsectionarcstroke-3",v,l),dn=TweenMax.to("#navdot4",".01",{css:{className:"+=scene-dotactive"}});cn.add(ln).add(rn).add(dn);{var wn;new ScrollMagic.Scene({triggerElement:"#scene-4",offset:g,duration:u}).setTween(cn).on("enter",function(){$("#navdot3").removeClass("scene-dotactive")}).addTo(e)}e.scrollTo(function(e){1===m&&2===wn?TweenMax.to(window,3.5,{scrollTo:{y:e,autoKill:!1},ease:Sine.easeOut}):Math.abs(wn-m)>1?TweenMax.to(window,0,{scrollTo:{y:e,autoKill:!1}}):TweenMax.to(window,2,{scrollTo:{y:e,autoKill:!1},ease:Sine.easeOut})}),$("#nav-scroll").on("click tap",function(){var a;m>=4?(a="#scene-1",wn=1):(a="#scene-"+(m+1),wn=m+1),e.scrollTo(a)}),$(".navdot, .scrollto").on("click tap",function(n){var a=$(this).attr("href");a.length>0&&(n.preventDefault(),wn=parseInt(a.slice(-1),10),e.scrollTo(a))})},r=!1,d=function(){r=!0,$("html").addClass("no-magic")},v=function(){function n(){e.height($(window).height()+60)}function a(){return"undefined"!=typeof window.matchMedia||"undefined"!=typeof window.msMatchMedia}var e=$("html, body, .scene-background");if(a()&&window.matchMedia){var t=window.matchMedia("(orientation: portrait)");t.addListener(n)}n()},w=function(){function a(){return"undefined"!=typeof window.matchMedia||"undefined"!=typeof window.msMatchMedia}function t(a){a.matches?(e=!0,n&&document.location.reload(),n=!1,d()):(e&&document.location.reload(),e=!1,n=!0,l())}var e=!1,n=!1,o=500,s=500;if(a()&&window.matchMedia&&!isMobile){var c=window.matchMedia("(max-width: "+o+"px), (max-height: "+s+"px)");c.addListener(t),t(c)}else a()||isMobile||($(window).width()<=o||$(window).height()<=s?d():l())};isMobile?(d(),v()):$("html").hasClass("lte8")||r?d():w(),$("#copy-year").text((new Date).getFullYear())});